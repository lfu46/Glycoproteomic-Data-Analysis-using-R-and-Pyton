# Data Access Guide

This document explains how to obtain and prepare data for the Glycoproteomic Data Analysis tutorial.

## Sample Data (Included)

Small sample datasets are included in each chapter's `training_data/` folder for quick testing. These allow you to run the code immediately without downloading large files.

| Chapter | Sample File | Description |
|---------|-------------|-------------|
| Chapter 1 | `training_data.csv` | Newly synthesized protein data with fold changes and GO terms (~100 proteins) |
| Chapter 2 | Generated from Chapter 2 code | TMT quantification data |
| Chapter 3 | Generated from Chapter 2 | Normalized protein quantification |
| Chapter 4 | Generated from Chapter 3 | Differential expression results |
| Chapter 5 | `HEK_Nterm_Kd_half_life_sequence.csv`, `common_Nterm_protein.csv` | N-terminal peptide sequences |

## Full Datasets

For complete analysis with your own data or larger datasets, you'll need to obtain additional files.

### Chapter 1: R Basics

**Required file:** `training_data.csv`

**Format:**
| Column | Description |
|--------|-------------|
| Gene | Gene symbol |
| Btz/DMSO | Fold change for Btz vs DMSO |
| 3MA/DMSO | Fold change for 3MA vs DMSO |
| Comb/DMSO | Fold change for combination vs DMSO |
| GO Term columns | Binary (0/1) indicators for subcellular localization |

### Chapter 2: Data Normalization

**Required file:** Peptide search results from mass spectrometry search software (e.g., Sequest, MSFragger)

**Expected columns:**
| Column | Description |
|--------|-------------|
| Reference | Protein reference (should contain "HUMAN") |
| Peptide | Full peptide sequence with modifications |
| Trimmed.Peptide | Clean peptide sequence |
| XCorr | Cross-correlation score |
| PPM | Mass error in parts per million |
| Sum.Sn | Sum of signal-to-noise ratios |
| TMT channels | Columns for each TMT reporter ion (126Sn, 127nSn, etc.) |

**Note:** The raw data file is typically generated by your MS search software. Adjust column names and filtering thresholds based on your search engine.

### Chapter 4: Enrichment Analysis

**Required external databases:**

#### CORUM Database (Protein Complexes)
1. Visit: https://mips.helmholtz-muenchen.de/corum/download
2. Download: **UniProt-CORUM Mapping** (`corum_uniprotCorumMapping.txt`)
3. Place in: `Chapter_4_Enrichment_Analysis/training_data/`

**Format:**
| Column | Description |
|--------|-------------|
| corum_id | CORUM complex identifier |
| UniProtKB_accession_number | UniProt accession |

#### Pfam Database (Protein Domains)
1. Visit: https://ftp.ebi.ac.uk/pub/databases/Pfam/releases/Pfam37.0/proteomes/
2. Download: `9606.tsv.gz` (human proteome, ~2.8MB)
3. Decompress and place in: `Chapter_4_Enrichment_Analysis/training_data/`

**Format:** Tab-separated file with protein domain annotations. Column X6 contains Pfam IDs, Column X1 contains protein identifiers.

### Chapter 5: Structure Analysis

**Required files:**

#### Sequence Data
- `HEK_Nterm_Kd_half_life_sequence.csv`: Contains N-terminal peptide sequences for physicochemical analysis
- `common_Nterm_protein.csv`: Protein list with modification positions

#### AlphaFold Structure Data
For structural analysis, you need to download AlphaFold predicted structures:

1. **CIF files** (Crystallographic Information Files):
   - Download from: https://alphafold.ebi.ac.uk/
   - Or use StructureMap's `download_alphafold_cif()` function
   - Place in: `training_data/alphafold_cif/`

2. **PAE files** (Predicted Aligned Error):
   - Download from: https://alphafold.ebi.ac.uk/
   - Or use StructureMap's `download_alphafold_pae()` function
   - Place in: `training_data/alphafold_pae/`

**File naming convention:**
- CIF: `AF-{UniProt_ID}-F1-model_v4.cif`
- PAE: `AF-{UniProt_ID}-F1-predicted_aligned_error_v4.json`

## Generating Your Own Data

### From Mass Spectrometry Experiments

If you have your own TMT-labeled proteomics data:

1. Run your raw files through a search engine (Sequest, MSFragger, MaxQuant)
2. Export peptide-spectrum matches (PSMs) as CSV/TSV
3. Ensure your export includes:
   - Protein accession (UniProt format preferred)
   - Peptide sequences
   - Quality scores (XCorr, hyperscore, or equivalent)
   - TMT reporter ion intensities
   - Mass error (PPM)

4. Adjust the filtering thresholds in Chapter 2 based on your search engine and data quality

### Using Public Datasets

You can practice with public proteomics data from:
- **PRIDE Archive**: https://www.ebi.ac.uk/pride/
- **MassIVE**: https://massive.ucsd.edu/
- **jPOST**: https://jpostdb.org/

Search for TMT-labeled human proteomics datasets and download the search results.

## Data Format Checklist

Before starting each chapter, verify your data meets these requirements:

- [ ] Files are in CSV or TSV format (Excel files work for Chapter 1 only)
- [ ] Column names don't contain special characters that R can't handle
- [ ] Protein identifiers are in UniProt format (e.g., P12345)
- [ ] Numeric values don't contain text or special characters
- [ ] Missing values are empty cells or NA (not "N/A" or "-")

## Troubleshooting

### Common Issues

**"File not found" errors:**
- Check that files are in the correct `training_data/` subfolder
- Verify file names match exactly (case-sensitive on Linux/macOS)

**"Column not found" errors:**
- Your data may have different column names than the tutorial
- Use `colnames(your_data)` to see available columns
- Modify the `select()` and `rename()` calls accordingly

**Encoding issues:**
- Ensure files are saved with UTF-8 encoding
- On Windows, use `read_csv(..., locale = locale(encoding = "UTF-8"))`

### Getting Help

If you encounter data format issues:
1. Check the expected format tables above
2. Open an issue on GitHub with:
   - Chapter number
   - Error message
   - First few lines of your data (redacted if sensitive)
